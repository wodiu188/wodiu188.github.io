

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="配置文件,thymeleaf,国际化配置,注解类,实例">
  
    <meta name="description" content="由于重装系统了,所以很多截图都没了.太可惜了有机会在整理一下吧">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring随笔-不完整">
<meta property="og:url" content="http://example.com/2022/01/10/Spring%E9%9A%8F%E7%AC%94-%E4%B8%8D%E5%AE%8C%E6%95%B4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="由于重装系统了,所以很多截图都没了.太可惜了有机会在整理一下吧">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-01-10T06:01:39.000Z">
<meta property="article:modified_time" content="2023-07-31T08:31:57.097Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="后端">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Spring">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>Spring随笔-不完整 - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"↙","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":"UA-233159895-1","gtag":"G-XKM51WKGR7","tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"mPhovhHHyKg2LpAcQhS6tjAw-gzGzoHsz","app_key":"6W2dsSWjVfMOOkXrNbFWOSDN","server_url":"https://mphovhhh.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript('https://www.google-analytics.com/analytics.js', function() {
          window.ga = window.ga || function() { (ga.q = ga.q || []).push(arguments) };
          ga.l = +new Date;
          ga('create', 'UA-233159895-1', 'auto');
          ga('send', 'pageview');
        });
      }
    </script>
  

  
    <!-- Google gtag.js -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript('https://www.googletagmanager.com/gtag/js?id=G-XKM51WKGR7', function() {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-XKM51WKGR7');
        });
      }
    </script>
  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Spring随笔-不完整"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-01-10 14:01" pubdate>
          2022年1月10日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          37k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          305 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Spring随笔-不完整</h1>
            
            
              <div class="markdown-body">
                
                <p>Q@PropertySource</p>
<p>​	修改加载资源路径</p>
<p>@ConfigurationProperties(prefix&#x3D;”在全局中用什么名字来代表”)</p>
<p>​	告诉SpringBoot将本类中的所有属性和配置文件进行绑定</p>
<p>@EnableAutoConfiguration:</p>
<p>​	利用EnableAutoConfigurationSelector给容器中导入一些组件</p>
<p>​	List<String>configurations &#x3D; getCandidateConfiguration();获取候选的配置</String></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SpringFactoriesLoader</span>.</span></span>load<span class="hljs-constructor">FactoryNames()</span><br>扫描所有jar包下的META-INF/spring.factories<br>把扫描到的文件的内容包装成properties对象<br>从properties中获取<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">EnableAutoConfiguration</span>.</span></span><span class="hljs-keyword">class</span>类对应的值然后把他们添加到容器中<br></code></pre></td></tr></table></figure>

<p>将类路径下的META-INF&#x2F;spring.factories里面的配置加入到EnableAutoConfiguration容器中</p>
<p>@Component</p>
<p>​	添加到容器中（只有添加到容器中才能和@ConfigurationProperties一起使用）</p>
<p>@ImportResource(locations &#x3D; {“classpath:文件名”})</p>
<p>​	导入Spring的配置文件，让配置文件里面的内容生效，自己写的spring配置文件系统不识别，需要用这个导入才行</p>
<p>@Conditional根据不同的条件进行判断(如果@Conditional~~~也是判断的效果)</p>
<p>@Configuration指明一个类是配置类</p>
<p>@Bean将方法的返回值添加到容器中容器组件的id默认是方法名</p>
<h1 id="占位符"><a href="#占位符" class="headerlink" title="占位符"></a>占位符</h1><p>​	配置文件中可以使用${random.value}、${random.int[(一个值)|[一个范围如123，456]]}、${random.long}</p>
<p>​	属性占位符</p>
<p>​	app.name &#x3D; a</p>
<p>​	app.nname &#x3D; ${app.name}</p>
<h1 id="Profile"><a href="#Profile" class="headerlink" title="Profile"></a>Profile</h1><h3 id="多Profile文件"><a href="#多Profile文件" class="headerlink" title="多Profile文件"></a>多Profile文件</h3><p>​		主配置文件可以写成application-{Profile这里泛指文件环境名}.properties</p>
<p>​		默认使用application.properties的配置</p>
<h3 id="激活Profile文件"><a href="#激活Profile文件" class="headerlink" title="激活Profile文件"></a>激活Profile文件</h3><p>​		1.在application.properties中添加spring.profile.active &#x3D; “Profile上面那个环境名”</p>
<p>​		2.用命令行配置–spring.profiles.active&#x3D;环境</p>
<p>​		3.虚拟机配置-Dspring.profiles.active &#x3D; 环境</p>
<h3 id="yml多文档块"><a href="#yml多文档块" class="headerlink" title="yml多文档块"></a>yml多文档块</h3><p>​		在一个文件中用</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure>

<p>​		来分割文档块</p>
<p>​		</p>
<p>​		profiles是指定不同的环境</p>
<p>​		active:环境.</p>
<p>​			可以开启不同的环境</p>
<h1 id="配置文件的加载位置"><a href="#配置文件的加载位置" class="headerlink" title="配置文件的加载位置"></a>配置文件的加载位置</h1>  <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle">-<span class="hljs-keyword">file</span>:./config<br>-<span class="hljs-keyword">file</span>:./<br>-<span class="hljs-keyword">classpath</span>:<span class="hljs-regexp">/config/</span><br>-<span class="hljs-keyword">classpath</span>:/<br>加载顺序按照这个来依次加载<br>spring.config.location改变默认的配置文件位置<br>在项目打包好的情况下使用命令行启动的时候添加文件位置会和原来默认位置的配置文件进行互补配置<br></code></pre></td></tr></table></figure>

  <figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">命令行参数都是<span class="hljs-comment">--</span><br><br><span class="hljs-comment">## 	外部配置加载顺序</span><br><br>			按照从高到低的优先级所有会形成互补配置<br><br></code></pre></td></tr></table></figure>

<p>1.命令行 ,如:–server.port &#x3D; 8087<br>优先加载带profile,在判断加载包外的到包内的<br>2.jar包外的application-{profile}.properties或application.yml(带spring.profile)配置文件<br>3.jar包内的application-{profile}.properties或application.yml(带spring.profile)配置文件<br>4.jar包外的application.properties或application.yml(不带spring.profile)配置文件<br>5.jar包内的application.properties或application.yml(不带spring.profile)配置文件<br>6.@Configuration注解类上的@PropertySource<br>7.通过SpringApplication.setDefaultProperties指定的默认属性</p>
  <figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"># springboot自动加载<br><br>​	![<span class="hljs-number">1595494900657</span>](C:\Users\lll\AppData\<span class="hljs-keyword">Local</span>\<span class="hljs-keyword">Temp</span>\<span class="hljs-number">1595494900657.</span>png)<br><br>*****AutoConfiguration:自动配置类<br><br>****Properties:封装配置文件中的相关属性<br><br>![<span class="hljs-number">1595495801212</span>](C:\Users\lll\AppData\<span class="hljs-keyword">Local</span>\<span class="hljs-keyword">Temp</span>\<span class="hljs-number">1595495801212.</span>png)<br><br>配置文件下设置<span class="hljs-keyword">debug</span> = <span class="hljs-keyword">true</span><br><br>可以显示都那些类成功自动配置<br><br># 日志<br><br>```java<br>Logger logger = LoggerFactory.getLogger(getClass());<br>	    logger.trace(&quot;这是trace日志&quot;);<br>        logger.<span class="hljs-keyword">debug</span>(&quot;这是debug日志&quot;);<br>        logger.<span class="hljs-keyword">info</span>(&quot;这是info&quot;);<br>        logger.warn(&quot;这是warn&quot;);<br>        logger.error(&quot;这是error&quot;);<br>设置不同等级的信息<br>logging.<span class="hljs-keyword">level</span>.com.example.threedemo.threedemo = trace配置显示的等级<br>logging.file=spring.<span class="hljs-keyword">log</span>将日志写入这个文件(可以指定路径)<br>logging.path = /spring/<span class="hljs-keyword">log</span>指定目录<br><br>//格式建议百度搜索样式<br>logging.pattern.console=控制台输出的格式<br>logging.pattern.file=文件中日志输出的格式<br></code></pre></td></tr></table></figure>

<p>日志配置文件采用的时.xml的格式放到resource下</p>
<p>logback.xml会被框架识别</p>
<p>如果采用logback-spring.xml会被springboot识别</p>
<p>​	<springProfile name="环境名"></springProfile></p>
<p>​		<pattern>格式</pattern></p>
<p>​	</p>
<p>​	这样会在特定环境下使用这个格式,如果环境名前面加上!则会在非该环境下使用</p>
<p>日志转换</p>
<p>​	pom.xml里面添加</p>
<p>​	***AutoConfiguration类:给我们的容器中自动配置组件</p>
<p>​	***Properties类:封装配置文件内容 就是那些类进行绑定</p>
<h3 id="SpringBoot对静态资源的规则"><a href="#SpringBoot对静态资源的规则" class="headerlink" title="SpringBoot对静态资源的规则"></a>SpringBoot对静态资源的规则</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addResourceHandlers</span><span class="hljs-params">(ResourceHandlerRegistry registry)</span> &#123;<br>   <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.resourceProperties.isAddMappings()) &#123;<br>      logger.debug(<span class="hljs-string">&quot;Default resource handling disabled&quot;</span>);<br>      <span class="hljs-keyword">return</span>;<br>   &#125;<br>   <span class="hljs-type">Duration</span> <span class="hljs-variable">cachePeriod</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.resourceProperties.getCache().getPeriod();<br>   <span class="hljs-type">CacheControl</span> <span class="hljs-variable">cacheControl</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();<br>   <span class="hljs-keyword">if</span> (!registry.hasMappingForPattern(<span class="hljs-string">&quot;/webjars/**&quot;</span>)) &#123;<br>      customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="hljs-string">&quot;/webjars/**&quot;</span>)<br>            .addResourceLocations(<span class="hljs-string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>)<br>            .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));<br>   &#125;<br>   <span class="hljs-type">String</span> <span class="hljs-variable">staticPathPattern</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.mvcProperties.getStaticPathPattern();<br>   <span class="hljs-keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;<br>      customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)<br>            .addResourceLocations(getResourceLocations(<span class="hljs-built_in">this</span>.resourceProperties.getStaticLocations()))<br>            .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">private</span> Integer <span class="hljs-title function_">getSeconds</span><span class="hljs-params">(Duration cachePeriod)</span> &#123;<br>   <span class="hljs-keyword">return</span> (cachePeriod != <span class="hljs-literal">null</span>) ? (<span class="hljs-type">int</span>) cachePeriod.getSeconds() : <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>​	上面这段代码在WebMvcAutoConfiguration类里面的addResourceHandlers方法中记录了从那里获取静态资源</p>
<p>​	由于上面的代码路径是classpath:&#x2F;META-INF&#x2F;resources&#x2F;webjars&#x2F;所以以后的访问</p>
<p>​	<a href="http://localhost:端口/webjars/**(所有东西)都去这个路径下面找">http://localhost:端口/webjars/**(所有东西)都去这个路径下面找</a></p>
<p>​	访问时需要引入jQuery的依赖去<a target="_blank" rel="noopener" href="https://www.webjars.org/">https://www.webjars.org/</a>找访问时只需要填写resource下面的名称即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceProperties</span> <br><span class="hljs-comment">//可以在这里设置和静态资源有关的参数</span><br><span class="hljs-string">&quot;classpath:/META-INF/resources/&quot;</span>,     <br><span class="hljs-string">&quot;classpath:/resources/&quot;</span>, <br><span class="hljs-string">&quot;classpath:/static/&quot;</span>,<br><span class="hljs-string">&quot;classpath:/public/&quot;</span> <br><span class="hljs-string">&quot;/&quot;</span>如果找不到资源去这些文件夹下面找<br>但是所有的欢迎页静态资源下的所有的index.html被<span class="hljs-string">&quot;/**&quot;</span>映射<br>所以localhost:<span class="hljs-number">8080</span>会找index.html<br>**/favicon.ico网页的图标<br>修改默认路径spring.resource的路径<br></code></pre></td></tr></table></figure>

<h2 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h2><p>如JSP、Velocity、Freemarker、Thymeleaf</p>
<p>Thymeleaf</p>
<p>语法简单，功能更强大</p>
<p>用来切换版本</p>
<p>启用Thymeleaf后就可以自动在classpath：&#x2F;&#x2F;templates&#x2F;查找html文件</p>
<p>如发送</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/success&quot;)</span><br><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">success</span><span class="hljs-params">()</span>&#123;<br><br>	<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>Thymeleaf语法</p>
<p>1.使用前在html中导入Thymeleaf的命名空间</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">xmlns:th</span> = <span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br>语法提示<br></code></pre></td></tr></table></figure>

<p>2.使用语法</p>
<p>在标签里面加属性来调用语法如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:text</span> = <span class="hljs-string">&quot;$&#123;hello&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>语法规则</p>
<ol>
<li></li>
</ol>
<p>th:任意属性如th:id、th:class</p>
<p>th：insert、th：replace相当于include</p>
<p>th：each遍历</p>
<p>th：if、unless、switch、case判断</p>
<p>th：object、with 设置变量</p>
<p>th：attr、attrprepend、attrapped可以修改任意属性</p>
<p>th：属性</p>
<p>th：text修改标签里面的文本内容、utext不转义特殊字符</p>
<p>th：fragment声明片段</p>
<p>2.表达式</p>
 <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">Simple</span> <span class="hljs-string">expressions:(表达式语法)</span><br>    <span class="hljs-attr">Variable</span> <span class="hljs-string">Expressions: $&#123;...&#125;获取变量值OGNL</span><br>    	<span class="hljs-attr">1.获取属性</span><br>    	<span class="hljs-attr">2.内置属性</span> <span class="hljs-string"></span><br><span class="hljs-comment">    		#ctx : the context object.</span><br><span class="hljs-comment">            #vars: the context variables.</span><br><span class="hljs-comment">            #locale : the context locale.</span><br><span class="hljs-comment">            #request : (only in Web Contexts) the HttpServletRequest object.</span><br><span class="hljs-comment">            #response : (only in Web Contexts) the HttpServletResponse object.</span><br><span class="hljs-comment">            #session : (only in Web Contexts) the HttpSession object.</span><br><span class="hljs-comment">            #servletContext : (only in Web Contexts) the ServletContext object.</span><br>		<span class="hljs-attr">如Established</span> <span class="hljs-string">locale country: &lt;span th:text=&quot;$&#123;#locale.country&#125;&quot;&gt;US&lt;/span&gt;.</span><br>		<span class="hljs-attr">3.内置的工具对象</span><br><span class="hljs-comment">		#execInfo : information about the template being processed.</span><br><span class="hljs-comment">        #messages : methods for obtaining externalized messages inside variables expressions, in the same way as they</span><br>        <span class="hljs-attr">would</span> <span class="hljs-string">be obtained using #&#123;…&#125; syntax.</span><br><span class="hljs-comment">        #uris : methods for escaping parts of URLs/URIs</span><br>        <span class="hljs-attr">Page</span> <span class="hljs-string">20 of 106</span><br><span class="hljs-comment">        #conversions : methods for executing the configured conversion service (if any).</span><br><span class="hljs-comment">        #dates : methods for java.util.Date objects: formatting, component extraction, etc.</span><br><span class="hljs-comment">        #calendars : analogous to #dates , but for java.util.Calendar objects.</span><br><span class="hljs-comment">        #numbers : methods for formatting numeric objects.</span><br><span class="hljs-comment">        #strings : methods for String objects: contains, startsWith, prepending/appending, etc.</span><br><span class="hljs-comment">        #objects : methods for objects in general.</span><br><span class="hljs-comment">        #bools : methods for boolean evaluation.</span><br><span class="hljs-comment">        #arrays : methods for arrays.</span><br><span class="hljs-comment">        #lists : methods for lists.</span><br><span class="hljs-comment">        #sets : methods for sets.</span><br><span class="hljs-comment">        #maps : methods for maps.</span><br><span class="hljs-comment">        #aggregates : methods for creating aggregates on arrays or collections.</span><br><span class="hljs-comment">        #ids : methods for dealing with id attributes that might be repeated (for example, as a result of an iteration).</span><br>    <span class="hljs-attr">Selection</span> <span class="hljs-string">Variable Expressions: *&#123;...&#125;变量选择表达式和$&#123;&#125;功能上一样</span><br>    	<span class="hljs-attr">配合th</span>:<span class="hljs-string">object=&quot;$&#123;session.user&#125;&quot;进行使用后可以直接*&#123;firstName&#125;调用th:object的值</span><br>    	<span class="hljs-attr">如</span><br>    	<span class="hljs-attr">&lt;div</span> <span class="hljs-string">th:object=&quot;$&#123;session.user&#125;&quot;&gt;</span><br>        <span class="hljs-attr">&lt;p&gt;Name</span>: <span class="hljs-string">&lt;span th:text=&quot;*&#123;firstName&#125;&quot;&gt;Sebastian&lt;/span&gt;.&lt;/p&gt;</span><br>        <span class="hljs-attr">&lt;p&gt;Surname</span>: <span class="hljs-string">&lt;span th:text=&quot;*&#123;lastName&#125;&quot;&gt;Pepper&lt;/span&gt;.&lt;/p&gt;</span><br>        <span class="hljs-attr">&lt;p&gt;Nationality</span>: <span class="hljs-string">&lt;span th:text=&quot;*&#123;nationality&#125;&quot;&gt;Saturn&lt;/span&gt;.&lt;/p&gt;</span><br>        <span class="hljs-attr">&lt;/div&gt;</span><br><br>    <span class="hljs-attr">Message</span> <span class="hljs-string">Expressions: #&#123;...&#125;获取国际化内容</span><br>    <span class="hljs-attr">Link</span> <span class="hljs-string">URL Expressions: @&#123;...&#125;定义url链接</span><br>            <span class="hljs-attr">&lt;!--</span> <span class="hljs-string">Will produce &#x27;http://localhost:8080/gtvg/order/details?orderId=3&#x27; (plus rewriting) --&gt;</span><br>        <span class="hljs-attr">&lt;a</span> <span class="hljs-string">href=&quot;details.html&quot;</span><br>        <span class="hljs-attr">th</span>:<span class="hljs-string">href=&quot;@&#123;http://localhost:8080/gtvg/order/details(orderId=$&#123;o.id&#125;)&#125;&quot;&gt;view&lt;/a&gt;</span><br>        <span class="hljs-attr">&lt;!--</span> <span class="hljs-string">Will produce &#x27;/gtvg/order/details?orderId=3&#x27; (plus rewriting) --&gt;</span><br>        <span class="hljs-attr">&lt;a</span> <span class="hljs-string">href=&quot;details.html&quot; th:href=&quot;@&#123;/order/details(orderId=$&#123;o.id&#125;)&#125;&quot;&gt;view&lt;/a&gt;</span><br>        <span class="hljs-attr">&lt;!--</span> <span class="hljs-string">Will produce &#x27;/gtvg/order/3/details&#x27; (plus rewriting) --&gt;</span><br>        <span class="hljs-attr">&lt;a</span> <span class="hljs-string">href=&quot;details.html&quot; th:href=&quot;@&#123;/order/&#123;orderId&#125;/details(orderId=$&#123;o.id&#125;)&#125;&quot;&gt;view&lt;/a</span><br>        <br>        <br>    <span class="hljs-attr">Fragment</span> <span class="hljs-string">Expressions: ~&#123;...&#125;引用表达式</span><br>    <br><span class="hljs-attr">Literals</span>:<span class="hljs-string">(字面量)</span><br>    <span class="hljs-attr">Text</span> <span class="hljs-string">literals: &#x27;one text&#x27; , &#x27;Another one!&#x27; ,…</span><br>    <span class="hljs-attr">Number</span> <span class="hljs-string">literals: 0 , 34 , 3.0 , 12.3 ,…</span><br>    <span class="hljs-attr">Boolean</span> <span class="hljs-string">literals: true , false</span><br>    <span class="hljs-attr">Null</span> <span class="hljs-string">literal: null</span><br>    <span class="hljs-attr">Literal</span> <span class="hljs-string">tokens: one , sometext , main ,…</span><br><span class="hljs-attr">Text</span> <span class="hljs-string">operations:(文本操作)</span><br>    <span class="hljs-attr">String</span> <span class="hljs-string">concatenation: +</span><br>    <span class="hljs-attr">Literal</span> <span class="hljs-string">substitutions: |The name is $&#123;name&#125;|</span><br><span class="hljs-attr">Arithmetic</span> <span class="hljs-string">operations:(数学运算)</span><br>    <span class="hljs-attr">Binary</span> <span class="hljs-string">operators: + , - , * , / , %</span><br>	<span class="hljs-attr">Minus</span> <span class="hljs-string">sign :(unary operator): -	</span><br><span class="hljs-attr">Boolean</span> <span class="hljs-string">operations:(布尔运算)</span><br>    <span class="hljs-attr">Binary</span> <span class="hljs-string">operators: and , or</span><br>    <span class="hljs-attr">Boolean</span> <span class="hljs-string">negation (unary operator): ! , not</span><br><span class="hljs-attr">Comparisons</span> <span class="hljs-string">and equality:(比较运算)</span><br>    <span class="hljs-attr">Comparators</span>: <span class="hljs-string">&gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )</span><br>    <span class="hljs-attr">Equality</span> <span class="hljs-string">operators: == , != ( eq , ne )</span><br><span class="hljs-attr">Conditional</span> <span class="hljs-string">operators:(条件运算)</span><br>    <span class="hljs-attr">If-then</span>: <span class="hljs-string">(if) ? (then)</span><br>    <span class="hljs-attr">If-then-else</span>: <span class="hljs-string">(if) ? (then) : (else)</span><br>    <span class="hljs-attr">Default</span>: <span class="hljs-string">(value) ?: (defaultvalue)</span><br><span class="hljs-attr">Special</span> <span class="hljs-string">tokens:(没有操作)</span><br><br>	<span class="hljs-attr">No-Operation</span>:<span class="hljs-string">_</span><br></code></pre></td></tr></table></figure>

<p>标签内容里面写th的话用[[thy语法]]</p>
<h2 id="springboot对springMVC的自动配置"><a href="#springboot对springMVC的自动配置" class="headerlink" title="springboot对springMVC的自动配置"></a>springboot对springMVC的自动配置</h2><h5 id="1-ContentNegotiatingViewResolver和BeanNameViewResolver的组件"><a href="#1-ContentNegotiatingViewResolver和BeanNameViewResolver的组件" class="headerlink" title="1.ContentNegotiatingViewResolver和BeanNameViewResolver的组件"></a>1.ContentNegotiatingViewResolver和BeanNameViewResolver的组件</h5><p>​	自动配置了ViewResolver(视图解析器:根据方法返回值并得到视图对象(View),视图对象决定如何渲染(转发?重定向?))</p>
<p>​	ContentNegotiatingViewResolver:用来组合所有的视图解析器</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs aspectj">我们可以给容器中添加一个视图解析器;自动的将其组合进来<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myViewResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ViewResolver</span></span>&#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-function">View <span class="hljs-title">resolveViewName</span><span class="hljs-params">(String s, Locale locale)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>

<h5 id="2-静态资源文件夹-Webjars"><a href="#2-静态资源文件夹-Webjars" class="headerlink" title="2.静态资源文件夹(Webjars)"></a>2.静态资源文件夹(Webjars)</h5><h5 id="3-自动注册了Converter-GenericConverter-Formatter"><a href="#3-自动注册了Converter-GenericConverter-Formatter" class="headerlink" title="3.自动注册了Converter,GenericConverter,Formatter"></a>3.自动注册了Converter,GenericConverter,Formatter</h5><p>​	Converter:对页面提供的数据能够自动转换(数据一一对应)</p>
<p>​	GenericConverter:</p>
<p>​	Formatter:格式化器(按照一定的格式来转化如2017.12.17&#x3D;&#x3D;Date类型)</p>
<p>​	<code>自己添加格式化器和转换器只需要放在容器中即可和上面的视图转换器应该差不多</code></p>
<p>​	</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">HttpMessageConverter</span>用来彖传请求和响应的;例如一个<span class="hljs-selector-tag">User</span>对象转换为<span class="hljs-selector-tag">json</span><br>	想要添加<span class="hljs-selector-tag">HttpMessageConverter</span>只需要将自己的组件注册到容器中(<span class="hljs-variable">@Bean</span>,<span class="hljs-variable">@Component</span>)<br></code></pre></td></tr></table></figure>



<p>MessageCodeResolver定义错误代码生成规则</p>
<p>ConfigurationWebBindingInitalizer:可以自己创建一个来替换默认的</p>
<p>用来初始化WebDataBinder的(请求的数据和那个组件进行绑定)</p>
<p>!</p>
<p>使用WebMvcConfigurationSupport扩展spring MVC的功能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.fourdemo.config;<br><br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.ViewControllerRegistry;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;<br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMvcSupport</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WebMvcConfigurationSupport</span> &#123;<br><br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addViewControllers</span><span class="hljs-params">(ViewControllerRegistry registry)</span> &#123;<br><span class="hljs-comment">//            super.addViewControllers(registry);</span><br>            <span class="hljs-comment">//浏览器发送atguigu请求</span><br>            registry.addViewController(<span class="hljs-string">&quot;/index&quot;</span>).setViewName(<span class="hljs-string">&quot;/hello&quot;</span>);<br>        &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs aspectj">如果用了要自己配置所有的springMVC 可以添加<span class="hljs-meta">@EnableWebMvc</span>来直接全面接管springMVC(所有的自动配置都失效)<br><br>不推荐<br></code></pre></td></tr></table></figure>



<p>如果用server.context-path修改路径想要自动添加修改html的链接路径要用th:属性 &#x3D; “@{}”进行修改</p>
<h1 id="页面国际化"><a href="#页面国际化" class="headerlink" title="页面国际化"></a>页面国际化</h1><p>配置国际化文件SpringBoot自动配置好国际化资源组件</p>
<p>配置文件可以直接放在类路径下叫做message.properties</p>
<p>spring.message.basename&#x3D;i18n.login(按照上面的图为例)设置properties</p>
<h5 id="还记得-这个就是获取国际化信息的"><a href="#还记得-这个就是获取国际化信息的" class="headerlink" title="还记得#{}这个就是获取国际化信息的"></a>还记得#{}这个就是获取国际化信息的</h5><p>对称标签的text用</p>
<p>没有对称标签的text用</p>
<p>文件如果加载失败会显示这样结果</p>
<p>***LocaleResolver获取区域信息类</p>
<p>实现切换功能就要用一个类来继承LocaleResolver这样可以接收到区域信息的请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyLocaleResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">LocaleResolver</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Locale <span class="hljs-title function_">resolveLocale</span><span class="hljs-params">(HttpServletRequest request)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;l&quot;</span>);<br>        <span class="hljs-comment">//获得网页默认的语言</span><br>        <span class="hljs-type">Locale</span> <span class="hljs-variable">locale</span> <span class="hljs-operator">=</span> Locale.getDefault();<br>        <span class="hljs-comment">//判断请求是否为空</span><br>        <span class="hljs-keyword">if</span>(!l.isEmpty())<br>        &#123;<br>            String []split = l.split(<span class="hljs-string">&quot;_&quot;</span>);<br>            <span class="hljs-comment">//第一个参数是语言信息第二个国家信息</span><br>            locale = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Locale</span>(split[<span class="hljs-number">0</span>],split[<span class="hljs-number">1</span>]);<br>        &#125;<br>        <span class="hljs-keyword">return</span> locale;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setLocale</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Locale locale)</span> &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>创建完类还要添加到组件中这样才能替换自动配置的组件</p>
<p>注意组件名必须为localeResolver</p>
<h2 id="请求处理"><a href="#请求处理" class="headerlink" title="请求处理"></a>请求处理</h2><p>@DeleteMapping|@PutMapping|@GetMapping|@PostMapping|@RequestMapping</p>
<p>@RequestParam：将请求参数绑定到你控制器的方法参数上（是springmvc中接收普通参数的注解）</p>
<p>对于@PostMapping可以用@RequestParam来指定形参想要接收到的数据,形参里面放一个Map可以返回设置返回数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(value = &quot;/user/login&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">login</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;username&quot;)</span> String username,</span><br><span class="hljs-params">                        <span class="hljs-meta">@RequestParam(&quot;password&quot;)</span> String password,</span><br><span class="hljs-params">                        Map&lt;String,Object&gt; map</span><br><span class="hljs-params">    )</span>&#123;<br>        <span class="hljs-keyword">if</span>(!StringUtils.isEmpty(username)&amp;&amp;username.equals(<span class="hljs-string">&quot;123456&quot;</span>)&amp;&amp;password.equals(<span class="hljs-string">&quot;123456&quot;</span>))<br>        &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;dashboard&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            map.put(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;用户名或密码错误&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;index&quot;</span>;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>而html来处理返回的数据可以先用th:if来判断是否存在数据然后用th:text来设置值如果th:if不生效则p不会生效</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;message&#125;&quot;</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;not #strings.isEmpty(message)&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h5 id="为了防止表单重复提交可以使用重定向”redirect-x2F-“-但是还需要一个拦截器来防止随便复制地址就能登陆的问题"><a href="#为了防止表单重复提交可以使用重定向”redirect-x2F-“-但是还需要一个拦截器来防止随便复制地址就能登陆的问题" class="headerlink" title="为了防止表单重复提交可以使用重定向”redirect:&#x2F;“;但是还需要一个拦截器来防止随便复制地址就能登陆的问题"></a>为了防止表单重复提交可以使用重定向”redirect:&#x2F;“;但是还需要一个拦截器来防止随便复制地址就能登陆的问题</h5><h3 id="thymeleaf公共片段抽取-就是将页面重复的元素抽取出来"><a href="#thymeleaf公共片段抽取-就是将页面重复的元素抽取出来" class="headerlink" title="thymeleaf公共片段抽取(就是将页面重复的元素抽取出来)"></a>thymeleaf公共片段抽取(就是将页面重复的元素抽取出来)</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html">&lt;--th:fragment = &quot;name&quot;将元素抽取为名为name的片段如:--&gt;<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:fragment</span>=<span class="hljs-string">&quot;copy&quot;</span>&gt;</span><br>    sadfkjahsdfkjahsdfk<br>   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>引用公共片段<br>&lt;--1.th:insert=&quot;~&#123;templatename(网页名称) :: selector(选择器)(后边加个括号可以写创建的参数如图1)&#125;&quot;或&quot;~&#123;templatename::fragmentname&#125;&quot;--&gt;会在一个标签内部插入一个元素<br>&lt;--2.th:replace = &quot;~&#123;templatename(网页名称) :: selector(选择器)&#125;&quot;或&quot;~&#123;templatename::fragmentname&#125;&quot;--&gt;将声明引入的标签替换成引用的元素<br>&lt;--3.th:include=&quot;~&#123;templatename(网页名称) :: selector(选择器)&#125;&quot;或&quot;~&#123;templatename::fragmentname&#125;&quot;--&gt;把引入的内容插入到标签中不引入最外层标签<br>    <br>行内写法<br>    [[~&#123;&#125;]];<br></code></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html">循环读取出元素数据<br><span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;emp:$&#123;emps&#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;emp.getId()&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;emp.getLastName()&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;emp.getEmail()&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;emp.getGender()==0?&#x27;女&#x27;:&#x27;男&#x27;&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;emp.getDepartment()&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--									利用dates的系统静态方法来格式化日期--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;#dates.format(emp.birth,&#x27;yyyy-mm-dd HH:mm&#x27;)&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h5 id="对于Post请求方法想要获得参数必须将表单名字一一进行对应-并且如果是对象参数的话-对象属性要和表单名字一一对应才能实现自动传参的功能"><a href="#对于Post请求方法想要获得参数必须将表单名字一一进行对应-并且如果是对象参数的话-对象属性要和表单名字一一对应才能实现自动传参的功能" class="headerlink" title="对于Post请求方法想要获得参数必须将表单名字一一进行对应,并且如果是对象参数的话,对象属性要和表单名字一一对应才能实现自动传参的功能"></a>对于Post请求方法想要获得参数必须将表单名字一一进行对应,并且如果是对象参数的话,对象属性要和表单名字一一对应才能实现自动传参的功能</h5><h5 id="修改日期的格式spring-mvc-date-format-x3D-yyyy-x2F-mm-x2F-dd-例子"><a href="#修改日期的格式spring-mvc-date-format-x3D-yyyy-x2F-mm-x2F-dd-例子" class="headerlink" title="修改日期的格式spring.mvc.date-format &#x3D; yyyy&#x2F;mm&#x2F;dd(例子)"></a>修改日期的格式spring.mvc.date-format &#x3D; yyyy&#x2F;mm&#x2F;dd(例子)</h5><h2 id="springBoot的错误处理机制"><a href="#springBoot的错误处理机制" class="headerlink" title="springBoot的错误处理机制"></a>springBoot的错误处理机制</h2><h5 id="默认效果"><a href="#默认效果" class="headerlink" title="默认效果:"></a>默认效果:</h5><p>​	1.PC端返回一个错误页面</p>
<p>​	2.客户端,返回一个json数据</p>
<h5 id="定制错误响应"><a href="#定制错误响应" class="headerlink" title="定制错误响应"></a>定制错误响应</h5><p>​	系统自带的ErrorMvcAutoConfiguration错误处理的自动配置添加了下面这些组件</p>
<p>​		1.DefaultErrorAttributes帮助我们在页面共享信息</p>
<p>​		2.BasicErrorController处理默认的error请求</p>
<p>​		3.ErrorPageCustomizer系统出现错误后来到error请求进行处理</p>
<p>​		4.DefaultErrorViewResolver默认springboot会找到某个页面</p>
<p>​	出错步骤:</p>
<p>​		发生4xx或者5xx错误先启动ErrorPageCustomizer会生效,然后来到&#x2F;error请求</p>
<p>​	定制错误响应：</p>
<p>​		1.如何定制错误页面</p>
<p>​			（1）有模板引擎（模板引擎一般在template下）的情况下error&#x2F;404.html</p>
<p>​			（2）没有模板引擎放到静态资源下</p>
<p>​			（3）以上都没有、默认来到springboot的空白页面</p>
<p>​			可以使用4xx和5xx会自动匹配这种类型的错误，如果有精确到404等这样的页面就先寻找这样的页面</p>
<p>​		2.页面共享的能获取的信息：</p>
<p>​			timestamp：时间戳</p>
<p>​			status：状态码</p>
<p>​			error：错误提示</p>
<p>​			exception：异常</p>
<p>​			message：异常消息</p>
<p>​			errors：jsr303数据校验错误都在这里</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java">浏览器和其他的都是json返回<br><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-meta">@ExceptionHandler(MyException.class)</span><br>    <span class="hljs-keyword">public</span> Map&lt;String,Object&gt; <span class="hljs-title function_">handleException</span><span class="hljs-params">(Exception e)</span>&#123;<br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        map.put(<span class="hljs-string">&quot;code&quot;</span>,<span class="hljs-string">&quot;user.notexist&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;message&quot;</span>,e.getMessage());<br>        <span class="hljs-keyword">return</span> map;<br>    &#125;<br><br><br><br>自己定制错误页面的json<br>	<br>这句代码意思是实现一个自己的异常处理器然后设置状态码并进行页面的跳转但是不显示自己的map数据<br>    <span class="hljs-meta">@ExceptionHandler(MyException.class)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handleException</span><span class="hljs-params">(Exception e, HttpServletRequest request)</span>&#123;<br>        <span class="hljs-comment">//设置自己的状态码</span><br>        request.setAttribute(<span class="hljs-string">&quot;javax.servlet.error.status_code&quot;</span>,<span class="hljs-number">400</span>);<br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        map.put(<span class="hljs-string">&quot;code&quot;</span>,<span class="hljs-string">&quot;user.notexist&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;message&quot;</span>,e.getMessage());<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;forward:/error&quot;</span>;<br>    &#125;<br>由于这个代码<br><span class="hljs-meta">@ConditionalOnMissingBean(value = ErrorAttributes.class)</span><br>所以当容器中没有ErrorAttributes时就会自动添加一个ErrorAttributes<br></code></pre></td></tr></table></figure>

<h1 id="配置嵌入式Servlet容器"><a href="#配置嵌入式Servlet容器" class="headerlink" title="配置嵌入式Servlet容器"></a>配置嵌入式Servlet容器</h1><p>springBoot默认使用Tomcat作为嵌入式的servlet容器</p>
<p>1、如何定制和修改servlet容器的相关配置</p>
<p>​	修改和server相关的配置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span> = <span class="hljs-string">8081</span><br><span class="hljs-attr">//通用的servlet容器配置</span><br><span class="hljs-attr">server.xxx</span><br><span class="hljs-attr">//如Tomcat设置</span><br><span class="hljs-attr">server.tomcat.xxx</span><br></code></pre></td></tr></table></figure>

<p>​	编写一个WebServerFactoryCustomizer<ConfigurableWebServerFactory>:嵌入式的servlet容器制定器来修改servlet容器的配置</ConfigurableWebServerFactory></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> WebServerFactoryCustomizer&lt;ConfigurableWebServerFactory&gt; <span class="hljs-title function_">webServerFactoryCustomizer</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebServerFactoryCustomizer</span>&lt;ConfigurableWebServerFactory&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">customize</span><span class="hljs-params">(ConfigurableWebServerFactory factory)</span> &#123;<br>                factory.setPort(<span class="hljs-number">8081</span>);<br>            &#125;<br>        &#125;;<br>    &#125;<br></code></pre></td></tr></table></figure>





<p>​	注册Spring的三大组件</p>
<p>​		1.ServletRegistrationBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//注册Servlet</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br><br>        doPost(req,resp);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <br>        resp.getWriter().write(<span class="hljs-string">&quot;Hello&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//注册到@Bean中</span><br> <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title function_">myServlet</span><span class="hljs-params">()</span>&#123;<br>        ServletRegistrationBean&lt;Servlet&gt; servletServletRegistrationBean = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletRegistrationBean</span>&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyServlet</span>(),<span class="hljs-string">&quot;/MyServlet&quot;</span>);<br><br>        <span class="hljs-keyword">return</span> servletServletRegistrationBean;<br><br>    &#125;<br></code></pre></td></tr></table></figure>

<p>​		2.FilterRegistrationBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//注册Filter</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//添加到Bean中</span><br><span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> FilterRegistrationBean <span class="hljs-title function_">filterRegistrationBean</span><span class="hljs-params">()</span>&#123;<br>        FilterRegistrationBean&lt;Filter&gt; filterFilterRegistrationBean = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterRegistrationBean</span>&lt;&gt;();<br><br>        filterFilterRegistrationBean.setUrlPatterns(Arrays.asList(<span class="hljs-string">&quot;/hello&quot;</span>,<span class="hljs-string">&quot;/myServlet&quot;</span>));<br>        filterFilterRegistrationBean.setFilter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyFilter</span>());<br>        <span class="hljs-keyword">return</span> filterFilterRegistrationBean;<br><br>    &#125;<br></code></pre></td></tr></table></figure>

<p>​		3.ServletListenerRegistrationBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//注册</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ServletContextListener</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextInitialized</span><span class="hljs-params">(ServletContextEvent sce)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Initialized&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextDestroyed</span><span class="hljs-params">(ServletContextEvent sce)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Destroyed&quot;</span>);<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">//添加到Bean中</span><br><span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ServletListenerRegistrationBean&lt;MyListener&gt; <span class="hljs-title function_">myRegistration</span><span class="hljs-params">()</span>&#123;<br>        ServletListenerRegistrationBean&lt;MyListener&gt; registrationBean = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletListenerRegistrationBean</span>&lt;MyListener&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyListener</span>());<br>        <span class="hljs-keyword">return</span> registrationBean;<br>    &#125;<br></code></pre></td></tr></table></figure>

<h2 id="x2F-或拦截jsp请求但是-x2F-不会"><a href="#x2F-或拦截jsp请求但是-x2F-不会" class="headerlink" title="&#x2F;*或拦截jsp请求但是&#x2F;不会"></a>&#x2F;*或拦截jsp请求但是&#x2F;不会</h2><p>可以通过server.servletPath来修改springMVC前端控制器默认拦截的请求路径</p>
<p>2、能否支持其他的servlet容器</p>
<p>​	在pom.xml里面添加要依赖的容器即可</p>
<p>​	默认支持Tomcat</p>
<p>​			Jetty</p>
<p>​			Undertow</p>
<p>嵌入式Servlet容器自动配置原理;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//这个类表示决定采用哪种servlet容器重点在于ConditionalOnClass</span><br><br><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnWebApplication</span><br><span class="hljs-meta">@EnableConfigurationProperties(ServerProperties.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmbeddedWebServerFactoryCustomizerAutoConfiguration</span> &#123;<br><br>	<span class="hljs-comment">/**</span><br><span class="hljs-comment">	 * Nested configuration if Tomcat is being used.</span><br><span class="hljs-comment">	 */</span><br>	<span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br>	<span class="hljs-meta">@ConditionalOnClass(&#123; Tomcat.class, UpgradeProtocol.class &#125;)</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TomcatWebServerFactoryCustomizerConfiguration</span> &#123;<br><br>		<span class="hljs-meta">@Bean</span><br>		<span class="hljs-keyword">public</span> TomcatWebServerFactoryCustomizer <span class="hljs-title function_">tomcatWebServerFactoryCustomizer</span><span class="hljs-params">(Environment environment,</span><br><span class="hljs-params">				ServerProperties serverProperties)</span> &#123;<br>			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TomcatWebServerFactoryCustomizer</span>(environment, serverProperties);<br>		&#125;<br><br>	&#125;<br><br>	<span class="hljs-comment">/**</span><br><span class="hljs-comment">	 * Nested configuration if Jetty is being used.</span><br><span class="hljs-comment">	 */</span><br>	<span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br>	<span class="hljs-meta">@ConditionalOnClass(&#123; Server.class, Loader.class, WebAppContext.class &#125;)</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JettyWebServerFactoryCustomizerConfiguration</span> &#123;<br><br>		<span class="hljs-meta">@Bean</span><br>		<span class="hljs-keyword">public</span> JettyWebServerFactoryCustomizer <span class="hljs-title function_">jettyWebServerFactoryCustomizer</span><span class="hljs-params">(Environment environment,</span><br><span class="hljs-params">				ServerProperties serverProperties)</span> &#123;<br>			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JettyWebServerFactoryCustomizer</span>(environment, serverProperties);<br>		&#125;<br><br>	&#125;<br><br>	<span class="hljs-comment">/**</span><br><span class="hljs-comment">	 * Nested configuration if Undertow is being used.</span><br><span class="hljs-comment">	 */</span><br>	<span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br>	<span class="hljs-meta">@ConditionalOnClass(&#123; Undertow.class, SslClientAuthMode.class &#125;)</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UndertowWebServerFactoryCustomizerConfiguration</span> &#123;<br><br>		<span class="hljs-meta">@Bean</span><br>		<span class="hljs-keyword">public</span> UndertowWebServerFactoryCustomizer <span class="hljs-title function_">undertowWebServerFactoryCustomizer</span><span class="hljs-params">(Environment environment,</span><br><span class="hljs-params">				ServerProperties serverProperties)</span> &#123;<br>			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UndertowWebServerFactoryCustomizer</span>(environment, serverProperties);<br>		&#125;<br><br>	&#125;<br><br>	<span class="hljs-comment">/**</span><br><span class="hljs-comment">	 * Nested configuration if Netty is being used.</span><br><span class="hljs-comment">	 */</span><br>	<span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br>	<span class="hljs-meta">@ConditionalOnClass(HttpServer.class)</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NettyWebServerFactoryCustomizerConfiguration</span> &#123;<br><br>		<span class="hljs-meta">@Bean</span><br>		<span class="hljs-keyword">public</span> NettyWebServerFactoryCustomizer <span class="hljs-title function_">nettyWebServerFactoryCustomizer</span><span class="hljs-params">(Environment environment,</span><br><span class="hljs-params">				ServerProperties serverProperties)</span> &#123;<br>			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NettyWebServerFactoryCustomizer</span>(environment, serverProperties);<br>		&#125;<br><br>	&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>



<h1 id="注解类"><a href="#注解类" class="headerlink" title="注解类"></a>注解类</h1><h4 id="Order"><a href="#Order" class="headerlink" title="@Order"></a>@Order</h4><p>springsecurity中注解去调整自定义过滤器在过滤器链中的位置。</p>
<h4 id="Mapper"><a href="#Mapper" class="headerlink" title="@Mapper"></a>@Mapper</h4><p>将结构托管给springboot并变成实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserDAO</span> &#123;<br>   <span class="hljs-comment">//代码</span><br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="MapperScan"><a href="#MapperScan" class="headerlink" title="@MapperScan"></a>@MapperScan</h4><p>指定要变成实现类的接口所在的包，然后包下面的所有接口在编译之后都会生成相应的实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@MapperScan(&quot;com.winter.dao&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringbootMybatisDemoApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(SpringbootMybatisDemoApplication.class, args);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h4 id="Controller-name-x3D-””"><a href="#Controller-name-x3D-””" class="headerlink" title="@Controller(name&#x3D;””)"></a>@Controller(name&#x3D;””)</h4><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 给组件重新定义一个名字如果不为空的话</span><br><span class="hljs-comment"> */</span><br></code></pre></td></tr></table></figure>



<h4 id="PathVariable"><a href="#PathVariable" class="headerlink" title="@PathVariable"></a>@PathVariable</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">&quot;xxx&quot;</span>)<br>通过 <span class="hljs-variable">@PathVariable</span> 可以将URL中占位符参数&#123;<span class="hljs-selector-tag">xxx</span>&#125;绑定到处理器类的方法形参中@<span class="hljs-selector-tag">PathVariable</span>(“xxx“) <br> <br>@<span class="hljs-selector-tag">RequestMapping</span>(value=”user/&#123;<span class="hljs-selector-tag">id</span>&#125;/&#123;<span class="hljs-selector-tag">name</span>&#125;”)<br>请求路径：<span class="hljs-selector-tag">http</span>:<span class="hljs-comment">//localhost:8080/hello/show5/1/james</span><br></code></pre></td></tr></table></figure>



<p>@ModelAttribute</p>
<blockquote>
<p><code>@ModelAttribute</code>注解注释的方法会在此controller每个方法执行前被执行</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorldController</span> &#123;<br><br>    <span class="hljs-meta">@ModelAttribute</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">populateModel</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String abc, Model model)</span> &#123;<br>       model.addAttribute(<span class="hljs-string">&quot;attributeName&quot;</span>, abc);<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/helloWorld&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">helloWorld</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;helloWorld&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="Resource"><a href="#Resource" class="headerlink" title="@Resource"></a>@Resource</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Resource</span>和<span class="hljs-variable">@Autowired</span>注解都是用来实现依赖注入的。只是<span class="hljs-variable">@AutoWried</span>按by type自动注入，而<span class="hljs-variable">@Resource</span>默认按byName自动注入。<br><br><span class="hljs-variable">@Resource</span>有两个重要属性，分别是name和type<br><br>spring将name属性解析为bean的名字，而type属性则被解析为bean的类型。所以如果使用name属性，则使用byName的自动注入策略，如果使用type属性则使用byType的自动注入策略。如果都没有指定，则通过反射机制使用byName自动注入策略。<br></code></pre></td></tr></table></figure>

<h4 id="Target-ElementType-TYPE-说明该注解只能用在接口或者类和enum上"><a href="#Target-ElementType-TYPE-说明该注解只能用在接口或者类和enum上" class="headerlink" title="@Target({ElementType.TYPE})说明该注解只能用在接口或者类和enum上"></a>@Target({ElementType.TYPE})说明该注解只能用在接口或者类和enum上</h4><h4 id="Retention-RetentionPolicy-RUNTIME-说明是运行注解"><a href="#Retention-RetentionPolicy-RUNTIME-说明是运行注解" class="headerlink" title="@Retention(RetentionPolicy.RUNTIME)说明是运行注解"></a>@Retention(RetentionPolicy.RUNTIME)说明是运行注解</h4><h4 id="Documented将注解添加到doc中"><a href="#Documented将注解添加到doc中" class="headerlink" title="@Documented将注解添加到doc中"></a>@Documented将注解添加到doc中</h4><h4 id="Inherited-可以被继承"><a href="#Inherited-可以被继承" class="headerlink" title="@Inherited:可以被继承"></a>@Inherited:可以被继承</h4><h4 id="SpringBootConfiguration-springboot的配置注解"><a href="#SpringBootConfiguration-springboot的配置注解" class="headerlink" title="@SpringBootConfiguration:springboot的配置注解"></a>@SpringBootConfiguration:springboot的配置注解</h4><h4 id="EnableAutoConfiguration-启用自动注解功能"><a href="#EnableAutoConfiguration-启用自动注解功能" class="headerlink" title="@EnableAutoConfiguration:启用自动注解功能"></a>@EnableAutoConfiguration:启用自动注解功能</h4><h4 id="ComponentScan-组件的自动扫描"><a href="#ComponentScan-组件的自动扫描" class="headerlink" title="@ComponentScan:组件的自动扫描"></a>@ComponentScan:组件的自动扫描</h4><h4 id="AutoConfigureOrder"><a href="#AutoConfigureOrder" class="headerlink" title="@AutoConfigureOrder"></a>@AutoConfigureOrder</h4><p>​	代表启动的加载顺序参数越小越早加载</p>
<p>​	@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)</p>
<h4 id="AutoConfigureAfter"><a href="#AutoConfigureAfter" class="headerlink" title="@AutoConfigureAfter"></a>@AutoConfigureAfter</h4><p>在…之后加载例如</p>
<p>@AutoConfigureAfter(ServletWebServerFactoryAutoConfiguration.class)这样就表示当使用了该注释要在ServletWebServerFactoryAutoConfiguration.class之后加载该类</p>
<h4 id="EnableConfigurationProperties"><a href="#EnableConfigurationProperties" class="headerlink" title="@EnableConfigurationProperties"></a>@EnableConfigurationProperties</h4><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7f54da1cb2eb">https://www.jianshu.com/p/7f54da1cb2eb</a></p>
<p> @EnableConfigurationProperties 相当于把使用 @ConfigurationProperties 的类进行了一次注入</p>
<p>当<code>@EnableConfigurationProperties</code>注解应用到你的<code>@Configuration</code>时， 任何被<code>@ConfigurationProperties</code>注解的beans将自动被Environment属性配置</p>
<p>说白了根据配置文件来初始化这个类</p>
<p>例如@EnableConfigurationProperties(WebMvcProperties.class)</p>
<p>而WebMvcProperties源码为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;spring.mvc&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMvcProperties</span> &#123;<br></code></pre></td></tr></table></figure>

<p>该类会根据配置文件的spring.mvc来进行装配</p>
<h3 id="Conditional"><a href="#Conditional" class="headerlink" title="@Conditional"></a>@Conditional</h3><h4 id="ConditionalOnWebApplication-type-x3D-Type-SERVLET"><a href="#ConditionalOnWebApplication-type-x3D-Type-SERVLET" class="headerlink" title="@ConditionalOnWebApplication(type &#x3D; Type.SERVLET)"></a>@ConditionalOnWebApplication(type &#x3D; Type.SERVLET)</h4><p>通过源码可以查看</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(&#123; ElementType.TYPE, ElementType.METHOD &#125;)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Conditional(OnWebApplicationCondition.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> ConditionalOnWebApplication &#123;<br>    <br>	<span class="hljs-comment">/**</span><br><span class="hljs-comment">	 * The required type of the web application.</span><br><span class="hljs-comment">	 * <span class="hljs-doctag">@return</span> the required web application type</span><br><span class="hljs-comment">	 */</span><br>	Type <span class="hljs-title function_">type</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> Type.ANY;<br><br>	<span class="hljs-comment">/**</span><br><span class="hljs-comment">	 * Available application types.</span><br><span class="hljs-comment">	 */</span><br>	<span class="hljs-keyword">enum</span> <span class="hljs-title class_">Type</span> &#123;<br><br>		<span class="hljs-comment">/**</span><br><span class="hljs-comment">		 * Any web application will match.</span><br><span class="hljs-comment">		 */</span><br>		ANY,<br><br>		<span class="hljs-comment">/**</span><br><span class="hljs-comment">		 * Only servlet-based web application will match.</span><br><span class="hljs-comment">		 */</span><br>		SERVLET,<br><br>		<span class="hljs-comment">/**</span><br><span class="hljs-comment">		 * Only reactive-based web application will match.</span><br><span class="hljs-comment">		 */</span><br>		REACTIVE<br><br>	&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>实际上就是一个Conditional就是当OnWebApplicationCondition加载时才会生效</p>
<p>@Conditional:只有满足一些列条件之后创建一个bean。</p>
<p>而内部是一个枚举遍历代表有着三种环境默认是ANY,而匹配web application才会是SERVLET</p>
<h4 id="ConditionalOnClass"><a href="#ConditionalOnClass" class="headerlink" title="@ConditionalOnClass"></a>@ConditionalOnClass</h4><p>判断当前classpath是否存在指定类，若存在则实例化被注释的类</p>
<p>例如@ConditionalOnClass(DispatcherServlet.class)</p>
<h4 id="ConditionalOnMissingBean"><a href="#ConditionalOnMissingBean" class="headerlink" title="@ConditionalOnMissingBean"></a>@ConditionalOnMissingBean</h4><p>检测bean是否注册如果注册就不会注册重复的bean，如果不存在检测的bean则该注解进行注解的类有效</p>
<h1 id="extend-SpringBootServletInitializer"><a href="#extend-SpringBootServletInitializer" class="headerlink" title="extend SpringBootServletInitializer"></a>extend SpringBootServletInitializer</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> SpringApplicationBuilder <span class="hljs-title function_">configure</span><span class="hljs-params">(SpringApplicationBuilder application)</span> &#123;<br>        <span class="hljs-keyword">return</span> application.sources(XXXApplication】.class);<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>springboot项目，若打包成war包，使用外置的tomcat启动</p>
<p>1、需要继承 org.springframework.boot.context.web.SpringBootServletInitializer类</p>
<p>2、然后重写configure(SpringApplicationBuilder application)方法<br>因为我们的项目是打成war包，然后部署到tomcat的~(还延续了mvc的方式)</p>
<h1 id="整理文章"><a href="#整理文章" class="headerlink" title="整理文章"></a>整理文章</h1><h3 id="springboot-启动类Application-扫盲（继承SpringBootServletInitializer作用）"><a href="#springboot-启动类Application-扫盲（继承SpringBootServletInitializer作用）" class="headerlink" title="springboot 启动类Application 扫盲（继承SpringBootServletInitializer作用）"></a>springboot 启动类Application 扫盲（继承SpringBootServletInitializer作用）</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/pmdream/article/details/96434028">https://blog.csdn.net/pmdream/article/details/96434028</a></p>
<h3 id="Spring-Boot快速入门"><a href="#Spring-Boot快速入门" class="headerlink" title="Spring Boot快速入门"></a>Spring Boot快速入门</h3><p><a target="_blank" rel="noopener" href="https://blog.didispace.com/spring-boot-learning-1/">https://blog.didispace.com/spring-boot-learning-1/</a></p>
<h3 id="springboot配置文件"><a href="#springboot配置文件" class="headerlink" title="springboot配置文件"></a>springboot配置文件</h3><p><a target="_blank" rel="noopener" href="https://blog.didispace.com/springbootproperties/">https://blog.didispace.com/springbootproperties/</a></p>
<p>在命令行运行时，连续的两个减号<code>--</code>就是对<code>application.properties</code>中的属性值进行赋值的标识。所以，<code>java -jar xxx.jar --server.port=8888</code>命令，等价于我们在<code>application.properties</code>中添加属性<code>server.port=8888</code>，该设置在样例工程中可见，读者可通过删除该值或使用命令行来设置该值来验证。</p>
<h3 id="springboot对MVC自动装配"><a href="#springboot对MVC自动装配" class="headerlink" title="springboot对MVC自动装配"></a>springboot对MVC自动装配</h3><p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.5.4/reference/htmlsingle/#features.spring-application">https://docs.spring.io/spring-boot/docs/2.5.4/reference/htmlsingle/#features.spring-application</a></p>
<p>①自动配置了视图解析器<br>②静态资源文件处理<br>③自动注册了大量的转换器和格式化器<br>④提供HttpMessageConverter对请求参数和返回结果进行处理<br>⑤自动注册了MessageCodesResolver<br>⑥默认欢迎页配置<br>⑦可配置的Web初始化绑定器</p>
<p>对于自动装配类WebMvcAutoConfiguration</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span><br><span class="hljs-meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span><br><span class="hljs-meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span><br><span class="hljs-meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span><br><span class="hljs-meta">@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span><br><span class="hljs-meta">		ValidationAutoConfiguration.class &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMvcAutoConfiguration</span> &#123;<br></code></pre></td></tr></table></figure>

<p>该类是被注册为一个配置文件,并且在SERVLET环境满足Servlet、DispatcherServlet、WebMvcConfigurer类被装配且不存在WebMvcConfigurationSupport类的情况下下才会生效而且要在DispatcherServletAutoConfiguration，TaskExecutionAutoConfiguration，ValidationAutoConfiguration类之后加载,</p>
<h3 id="视图解析器"><a href="#视图解析器" class="headerlink" title="视图解析器"></a>视图解析器</h3><p>用来将逻辑视图转换为物理视图并且所有视图解析器都要继承ViewResolver接口，SpringMVC的上下文配置可以指定他们的顺序，每种策略对应着一个实体类，这样开发者可以混用多个视图解析器并指定先后顺序，直到视图解析并返回视图。</p>
<h3 id="web应用1"><a href="#web应用1" class="headerlink" title="web应用1"></a>web应用1</h3><p><a target="_blank" rel="noopener" href="https://blog.didispace.com/springbootweb/">https://blog.didispace.com/springbootweb/</a></p>
<h2 id="DispatcherServlet"><a href="#DispatcherServlet" class="headerlink" title="DispatcherServlet"></a>DispatcherServlet</h2><p>这是SpringMVC中可见DispatcherServlet的重要性而SpringBoot是将Spring进行自动装配的升阶版</p>
<h1 id="Springboot-vue全栈"><a href="#Springboot-vue全栈" class="headerlink" title="Springboot+vue全栈"></a>Springboot+vue全栈</h1><h3 id="启动类的介绍"><a href="#启动类的介绍" class="headerlink" title="启动类的介绍"></a>启动类的介绍</h3><p>@SpringBootApplication是一个@Configuration所以是一个配置类可以在该类中@EnableAutoConfiguration标识开启自动化配置@ComponentScan扫描包并把默认扫描的类都位于当前类所在包的下面</p>
<p>虽然启动类上面包含@Configuration注解但是开发者可以创建一个新的类来配置bean</p>
<p>@ComponentScan除了扫描@Service、@Repository、@Component、@Controller和@RestController还会扫描@Configuration</p>
<blockquote>
<p>我们可以在resources下面创建banner.txt来打印启动时的TXT艺术字</p>
</blockquote>
<p>如果想要关闭在main中写入下面代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">SpringApplicationBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpringApplicationBuilder</span>(JavaProjectApplication.class);<br>builder.bannerMode(Banner.Mode.OFF).run(args);<br></code></pre></td></tr></table></figure>



<h3 id="基本的配置文件"><a href="#基本的配置文件" class="headerlink" title="基本的配置文件"></a>基本的配置文件</h3><p>application.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment">#端口</span><br><span class="hljs-attr">server.port</span>=<span class="hljs-string">8081</span><br><span class="hljs-comment">#错误后映射的地址</span><br><span class="hljs-attr">server.error.path</span>=<span class="hljs-string">ierror</span><br><span class="hljs-comment">#session的超时m代表分支默认秒</span><br><span class="hljs-attr">server.servlet.session</span> <span class="hljs-string">.timeout=30m</span><br><span class="hljs-comment">#项目路径默认/</span><br><span class="hljs-attr">server.servlet.context-path</span>= <span class="hljs-string">/chapter02</span><br><span class="hljs-comment">#字节编码</span><br><span class="hljs-attr">server.tomcat.uri-encoding</span>=<span class="hljs-string">utf-8</span><br><span class="hljs-comment">#允许的最大连接数</span><br><span class="hljs-attr">server.tomcat.max-threads</span>=<span class="hljs-string">500</span><br><span class="hljs-comment">#日志存放位置</span><br><span class="hljs-attr">server.tomcat.basedir</span>=<span class="hljs-string">/home/ sang/ tmp</span><br></code></pre></td></tr></table></figure>



<h3 id="生成ssh认证"><a href="#生成ssh认证" class="headerlink" title="生成ssh认证"></a>生成ssh认证</h3><p>keytool -genkey -alias tomcathttps -keyalg RSA -keysize 2048 -keystore sang.p12 -validity 365</p>
<ul>
<li>-genkey创建一个新的密钥</li>
<li>-alias表示keystore的别名</li>
<li>-keyalg表示使用加密算法式RSA</li>
<li>-keysize表示密钥长度</li>
<li>-keystore表示生成的密钥存放位置</li>
<li>-validity表示密钥的有效时间单位为天</li>
</ul>
<p>输入相关信息后会在当前目录生成一个sang.p12的文件</p>
<p>key-store表示文件名</p>
<p>key-alias表示密钥别名</p>
<p>key-store-password刚刚输入的密码</p>
<p>运行并输入<a href="https://localhost:8080进行查看（注意使用http会告诉请求失败，需要重定向）">https://localhost:8080进行查看（注意使用http会告诉请求失败，需要重定向）</a></p>
<h1 id="完结-tmd这本书为啥这么老-连个代码都没法弄"><a href="#完结-tmd这本书为啥这么老-连个代码都没法弄" class="headerlink" title="完结!!!!tmd这本书为啥这么老!连个代码都没法弄"></a>完结!!!!tmd这本书为啥这么老!连个代码都没法弄</h1><h2 id="另一本书"><a href="#另一本书" class="headerlink" title="另一本书"></a>另一本书</h2><h3 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(&#123;ElementType.TYPE&#125;)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@SpringBootConfiguration</span><br><span class="hljs-meta">@EnableAutoConfiguration</span><br><span class="hljs-meta">@ComponentScan(</span><br><span class="hljs-meta">    excludeFilters = &#123;@Filter(</span><br><span class="hljs-meta">    type = FilterType.CUSTOM,</span><br><span class="hljs-meta">    classes = &#123;TypeExcludeFilter.class&#125;</span><br><span class="hljs-meta">), @Filter(</span><br><span class="hljs-meta">    type = FilterType.CUSTOM,</span><br><span class="hljs-meta">    classes = &#123;AutoConfigurationExcludeFilter.class&#125;</span><br><span class="hljs-meta">)&#125;</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> SpringBootApplication &#123;<br>    <span class="hljs-meta">@AliasFor(</span><br><span class="hljs-meta">        annotation = EnableAutoConfiguration.class</span><br><span class="hljs-meta">    )</span><br>    Class&lt;?&gt;[] exclude() <span class="hljs-keyword">default</span> &#123;&#125;;<br><br>    <span class="hljs-meta">@AliasFor(</span><br><span class="hljs-meta">        annotation = EnableAutoConfiguration.class</span><br><span class="hljs-meta">    )</span><br>    String[] excludeName() <span class="hljs-keyword">default</span> &#123;&#125;;<br><br>    <span class="hljs-meta">@AliasFor(</span><br><span class="hljs-meta">        annotation = ComponentScan.class,</span><br><span class="hljs-meta">        attribute = &quot;basePackages&quot;</span><br><span class="hljs-meta">    )</span><br>    String[] scanBasePackages() <span class="hljs-keyword">default</span> &#123;&#125;;<br><br>    <span class="hljs-meta">@AliasFor(</span><br><span class="hljs-meta">        annotation = ComponentScan.class,</span><br><span class="hljs-meta">        attribute = &quot;basePackageClasses&quot;</span><br><span class="hljs-meta">    )</span><br>    Class&lt;?&gt;[] scanBasePackageClasses() <span class="hljs-keyword">default</span> &#123;&#125;;<br><br>    <span class="hljs-meta">@AliasFor(</span><br><span class="hljs-meta">        annotation = ComponentScan.class,</span><br><span class="hljs-meta">        attribute = &quot;nameGenerator&quot;</span><br><span class="hljs-meta">    )</span><br>    Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BeanNameGenerator</span>&gt; nameGenerator() <span class="hljs-keyword">default</span> BeanNameGenerator.class;<br><br>    <span class="hljs-meta">@AliasFor(</span><br><span class="hljs-meta">        annotation = Configuration.class</span><br><span class="hljs-meta">    )</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">proxyBeanMethods</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>源码</p>
<p>首先是@Target({ElementType.TYPE})说明该注解只能用在接口或者类和enum上</p>
<p>@Retention(RetentionPolicy.RUNTIME)说明是运行注解</p>
<p>@Documented将注解添加到doc中</p>
<p>@Inherited:可以被继承</p>
<p>@SpringBootConfiguration:springboot的配置注解实际上就是一个@Configuration</p>
<p>@EnableAutoConfiguration:启用自动注解功能</p>
<p>@ComponentScan:组件的自动扫描</p>
<p>SpringApplication的启动流程</p>
<p>通过run()方法我们得到</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConfigurableApplicationContext <span class="hljs-title function_">run</span><span class="hljs-params">(Class&lt;?&gt; primarySource, String... args)</span> &#123;<br>        <span class="hljs-keyword">return</span> run(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>[]&#123;primarySource&#125;, args);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConfigurableApplicationContext <span class="hljs-title function_">run</span><span class="hljs-params">(Class&lt;?&gt;[] primarySources, String[] args)</span> &#123;<br>        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">SpringApplication</span>(primarySources)).run(args);<br>    &#125;<br><br><span class="hljs-comment">//最终执行的run</span><br>    <span class="hljs-keyword">public</span> ConfigurableApplicationContext <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> &#123;<br>        <span class="hljs-type">StopWatch</span> <span class="hljs-variable">stopWatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StopWatch</span>();<br>        stopWatch.start();<br>        <span class="hljs-type">DefaultBootstrapContext</span> <span class="hljs-variable">bootstrapContext</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.createBootstrapContext();<br>        <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-built_in">this</span>.configureHeadlessProperty();<br>        <span class="hljs-type">SpringApplicationRunListeners</span> <span class="hljs-variable">listeners</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getRunListeners(args);<br>        listeners.starting(bootstrapContext, <span class="hljs-built_in">this</span>.mainApplicationClass);<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">ApplicationArguments</span> <span class="hljs-variable">applicationArguments</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultApplicationArguments</span>(args);<br>            <span class="hljs-type">ConfigurableEnvironment</span> <span class="hljs-variable">environment</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.prepareEnvironment(listeners, bootstrapContext, applicationArguments);<br>            <span class="hljs-built_in">this</span>.configureIgnoreBeanInfo(environment);<br>            <span class="hljs-type">Banner</span> <span class="hljs-variable">printedBanner</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.printBanner(environment);<br>            context = <span class="hljs-built_in">this</span>.createApplicationContext();<br>            context.setApplicationStartup(<span class="hljs-built_in">this</span>.applicationStartup);<br>            <span class="hljs-built_in">this</span>.prepareContext(bootstrapContext, context, environment, listeners, applicationArguments, printedBanner);<br>            <span class="hljs-built_in">this</span>.refreshContext(context);<br>            <span class="hljs-built_in">this</span>.afterRefresh(context, applicationArguments);<br>            stopWatch.stop();<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.logStartupInfo) &#123;<br>                (<span class="hljs-keyword">new</span> <span class="hljs-title class_">StartupInfoLogger</span>(<span class="hljs-built_in">this</span>.mainApplicationClass)).logStarted(<span class="hljs-built_in">this</span>.getApplicationLog(), stopWatch);<br>            &#125;<br><br>            listeners.started(context);<br>            <span class="hljs-built_in">this</span>.callRunners(context, applicationArguments);<br>        &#125; <span class="hljs-keyword">catch</span> (Throwable var10) &#123;<br>            <span class="hljs-built_in">this</span>.handleRunFailure(context, var10, listeners);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(var10);<br>        &#125;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            listeners.running(context);<br>            <span class="hljs-keyword">return</span> context;<br>        &#125; <span class="hljs-keyword">catch</span> (Throwable var9) &#123;<br>            <span class="hljs-built_in">this</span>.handleRunFailure(context, var9, (SpringApplicationRunListeners)<span class="hljs-literal">null</span>);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(var9);<br>        &#125;<br>    &#125;<br><br></code></pre></td></tr></table></figure>

<p>通过代码得知我们需要查看SpringApplication的构造函数得</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">SpringApplication</span><span class="hljs-params">(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources)</span> &#123;<br>    <span class="hljs-built_in">this</span>.sources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>();<br>    <span class="hljs-built_in">this</span>.bannerMode = Mode.CONSOLE;<br>    <span class="hljs-built_in">this</span>.logStartupInfo = <span class="hljs-literal">true</span>;<br>    <span class="hljs-built_in">this</span>.addCommandLineProperties = <span class="hljs-literal">true</span>;<br>    <span class="hljs-built_in">this</span>.addConversionService = <span class="hljs-literal">true</span>;<br>    <span class="hljs-built_in">this</span>.headless = <span class="hljs-literal">true</span>;<br>    <span class="hljs-built_in">this</span>.registerShutdownHook = <span class="hljs-literal">true</span>;<br>    <span class="hljs-built_in">this</span>.additionalProfiles = Collections.emptySet();<br>    <span class="hljs-built_in">this</span>.isCustomEnvironment = <span class="hljs-literal">false</span>;<br>    <span class="hljs-built_in">this</span>.lazyInitialization = <span class="hljs-literal">false</span>;<br>    <span class="hljs-built_in">this</span>.applicationContextFactory = ApplicationContextFactory.DEFAULT;<br>    <span class="hljs-built_in">this</span>.applicationStartup = ApplicationStartup.DEFAULT;<br>    <span class="hljs-built_in">this</span>.resourceLoader = resourceLoader;<br>    Assert.notNull(primarySources, <span class="hljs-string">&quot;PrimarySources must not be null&quot;</span>);<br>    <span class="hljs-built_in">this</span>.primarySources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>(Arrays.asList(primarySources));<br>    <span class="hljs-built_in">this</span>.webApplicationType = WebApplicationType.deduceFromClasspath();<br>    <span class="hljs-built_in">this</span>.bootstrapRegistryInitializers = <span class="hljs-built_in">this</span>.getBootstrapRegistryInitializersFromSpringFactories();<br>    <span class="hljs-built_in">this</span>.setInitializers(<span class="hljs-built_in">this</span>.getSpringFactoriesInstances(ApplicationContextInitializer.class));<br>    <span class="hljs-built_in">this</span>.setListeners(<span class="hljs-built_in">this</span>.getSpringFactoriesInstances(ApplicationListener.class));<br>    <span class="hljs-built_in">this</span>.mainApplicationClass = <span class="hljs-built_in">this</span>.deduceMainApplicationClass();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>其中webApplicationType参数是用于容器环境与容器初始化</p>
<p>WebApplicationType.deduceFromClasspath()根据这个得到webApplicationType的值为SERVLET</p>
<p>WebApplicationType的值有3个，分别如下所示。<br>①SERVLET：Servlet环境。<br>②REACTIVE：Reactive环境。<br>③NONE：非Web环境。</p>
<p>deduceFromClasspath()方法的实现逻辑如下：先判断webflux相关的类是否存在，存在则认为当前应用为REACTIVE类型；不存在则继续判断SERVLET相关的类是否存在，都不存在则为NONE类型；否则，当前应用为SERVLET类型。</p>
<h1 id="警告"><a href="#警告" class="headerlink" title="警告"></a>警告</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 创建线程安全的Map </span><br>   <span class="hljs-keyword">static</span> Map&lt;Long, User&gt; users = Collections.synchronizedMap(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;Long, User&gt;()); <br></code></pre></td></tr></table></figure>



<h1 id="小后端例子（整合VUE）"><a href="#小后端例子（整合VUE）" class="headerlink" title="小后端例子（整合VUE）"></a>小后端例子（整合VUE）</h1><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><p>安装node.js和vue-cli</p>
<p>首先创建一个项目文件夹将Java项目和vue项目分两个文件存放.</p>
<h2 id="VUE部分"><a href="#VUE部分" class="headerlink" title="VUE部分"></a>VUE部分</h2><p><a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/installation.html%E7%84%B6%E5%90%8E%E4%BD%BF%E7%94%A8vue-cli%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE">https://cli.vuejs.org/zh/guide/installation.html然后使用vue-cli搭建项目</a></p>
<h4 id="跨域问题放到文件vue-config-js"><a href="#跨域问题放到文件vue-config-js" class="headerlink" title="跨域问题放到文件vue.config.js"></a>跨域问题放到文件vue.config.js</h4><p>文件路径为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 跨域配置</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>    <span class="hljs-attr">devServer</span>: &#123;                <span class="hljs-comment">//记住，别写错了devServer//设置本地默认端口  选填</span><br>        <span class="hljs-attr">port</span>: <span class="hljs-number">8002</span>,<br>        <span class="hljs-attr">proxy</span>: &#123;                 <span class="hljs-comment">//设置代理，必须填</span><br>            <span class="hljs-string">&#x27;/api&#x27;</span>: &#123;              <span class="hljs-comment">//设置拦截器  拦截器格式   斜杠+拦截器名字，名字可以自己定</span><br>                <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;http://localhost:8001&#x27;</span>,     <span class="hljs-comment">//代理的目标地址</span><br>                <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,              <span class="hljs-comment">//是否设置同源，输入是的</span><br>                <span class="hljs-attr">pathRewrite</span>: &#123;                   <span class="hljs-comment">//路径重写</span><br>                    <span class="hljs-string">&#x27;/api&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>                     <span class="hljs-comment">//选择忽略拦截器里面的单词</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h4 id="request-js用来进行请求或者响应的处理"><a href="#request-js用来进行请求或者响应的处理" class="headerlink" title="request.js用来进行请求或者响应的处理"></a>request.js用来进行请求或者响应的处理</h4><p>只有在用request进行请求时才进行处理页面跳转不进行处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../src/router&quot;</span>;<br><br><span class="hljs-keyword">const</span> request = axios.<span class="hljs-title function_">create</span>(&#123;<br>    <span class="hljs-attr">baseURL</span>:<span class="hljs-string">&quot;/api&quot;</span>,<br>    <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span><br>&#125;)<br><br><span class="hljs-comment">// request 拦截器</span><br><span class="hljs-comment">// 可以自请求发送前对请求做一些处理</span><br><span class="hljs-comment">// 比如统一加token，对请求参数统一加密</span><br>request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;<br>    config.<span class="hljs-property">headers</span>[<span class="hljs-string">&#x27;Content-Type&#x27;</span>] = <span class="hljs-string">&#x27;application/json;charset=utf-8&#x27;</span>;<br>    <span class="hljs-comment">// let user = sessionStorage.getItem(&quot;user&quot;);</span><br>    <span class="hljs-comment">// console.error(config);</span><br>    <span class="hljs-comment">// if(!user &amp;&amp; router.path !=&quot;/register&quot;)&#123;</span><br>    <span class="hljs-comment">//     router.push(&quot;/login&quot;);</span><br>    <span class="hljs-comment">// &#125;</span><br><br>    <span class="hljs-comment">// config.headers[&#x27;token&#x27;] = user.token;  // 设置请求头</span><br>    <span class="hljs-keyword">return</span> config<br>&#125;, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)<br>&#125;);<br><br><span class="hljs-comment">// response 拦截器</span><br><span class="hljs-comment">// 可以在接口响应后统一处理结果</span><br>request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<br>    <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;1111&quot;</span>);<br>        <span class="hljs-keyword">let</span> res = response.<span class="hljs-property">data</span>;<br>        <span class="hljs-comment">// 如果是返回的文件</span><br>        <span class="hljs-keyword">if</span> (response.<span class="hljs-property">config</span>.<span class="hljs-property">responseType</span> === <span class="hljs-string">&#x27;blob&#x27;</span>) &#123;<br>            <span class="hljs-keyword">return</span> res<br>        &#125;<br>        <span class="hljs-comment">// 兼容服务端返回的字符串数据</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> res === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>            res = res ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(res) : res<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;,<br>    <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;err&#x27;</span> + error) <span class="hljs-comment">// for debug</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)<br>    &#125;<br>)<br><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> request<br></code></pre></td></tr></table></figure>



<h4 id="关于Element插件"><a href="#关于Element插件" class="headerlink" title="关于Element插件"></a>关于Element插件</h4><p>高版本的VUE引入ElementPlus</p>
<p>低版本直接引入ElementUI即可</p>
<h4 id="对于APP-vue文件"><a href="#对于APP-vue文件" class="headerlink" title="对于APP.vue文件"></a>对于APP.vue文件</h4><p>一般只有一个这个</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;router-view&gt;</span><span class="hljs-section">&lt;/router-view&gt;</span><br></code></pre></td></tr></table></figure>



<h4 id="关于路由的vue文件"><a href="#关于路由的vue文件" class="headerlink" title="关于路由的vue文件"></a>关于路由的vue文件</h4><h5 id="首先是正常的路由"><a href="#首先是正常的路由" class="headerlink" title="首先是正常的路由"></a>首先是正常的路由</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Layout&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Layout</span>,<br>    <span class="hljs-attr">redirect</span>:<span class="hljs-string">&quot;/user&quot;</span>,<br>    <span class="hljs-attr">meta</span>: &#123;<br>      <span class="hljs-attr">requireAuth</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// 配置此条，进入页面前判断是否需要登陆</span><br>    &#125;,<br>    <span class="hljs-attr">children</span>:[<br>      &#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;User&#x27;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-title class_">User</span>,<br>      &#125;,&#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/person&#x27;</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Person&#x27;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-comment">/* webpackChunkName: &quot;about&quot; */</span> <span class="hljs-string">&#x27;../views/Person.vue&#x27;</span>),<br>      &#125;,&#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/about&#x27;</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;About&#x27;</span>,<br>        <span class="hljs-comment">// route level code-splitting</span><br>        <span class="hljs-comment">// this generates a separate chunk (about.[hash].js) for this route</span><br>        <span class="hljs-comment">// which is lazy-loaded when the route is visited.</span><br>        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-comment">/* webpackChunkName: &quot;about&quot; */</span> <span class="hljs-string">&#x27;../views/About.vue&#x27;</span>)<br>      &#125;<br>    ]<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Login&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Login</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/register&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Register&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">()=&gt;</span><span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;../views/Register.vue&#x27;</span>)<br>  &#125;,<br><br>]<br></code></pre></td></tr></table></figure>

<p>每一个对象变是一条路由</p>
<p>但是对于children内的路由一般展示在上层的<router-view></router-view>中</p>
<p>在上面这种带有children一般如下格式有着公共模块,有着展示区域</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;Header/&gt;<br><br>        &lt;div style=&quot;display: flex;&quot;&gt;<br>            &lt;Aside/&gt;<br>            &lt;router-view style=&quot;flex: 1&quot;&gt;&lt;/router-view&gt;<br><br>        &lt;/div&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>    import Header from &quot;../components/Header&quot;;<br>    import Aside from &quot;../components/Aside&quot;;<br><br>    export default &#123;<br>        name: &quot;Layout&quot;,<br>        components:&#123;<br>            Header,<br>            Aside<br>        &#125;,<br>    &#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure>







<h5 id="授权认证"><a href="#授权认证" class="headerlink" title="授权认证"></a>授权认证</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js">router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requireAuth</span>) &#123; <span class="hljs-comment">// 判断该路由是否需要登录权限</span><br>    <span class="hljs-keyword">if</span> (sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;user&quot;</span>)!=<span class="hljs-literal">null</span> ) &#123; <span class="hljs-comment">// 通过vuex state获取当前的userid是否存在</span><br>      <span class="hljs-title function_">next</span>();<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-title function_">next</span>(&#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>        <span class="hljs-comment">// query: &#123; redirect: to.fullPath &#125; // 将跳转的路由path作为参数，登录成功后跳转到该路由</span><br>      &#125;)<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-title function_">next</span>();<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>



<h4 id="页面跳转"><a href="#页面跳转" class="headerlink" title="页面跳转"></a>页面跳转</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;/login&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>vue文件的函数中一般使用这种方法</p>
<p>在js文件中一般采用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">router.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;/login&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>然后按alt+enter引入router</p>
<h2 id="Java部分"><a href="#Java部分" class="headerlink" title="Java部分"></a>Java部分</h2><p>comment部分</p>
<p>跨域问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CorsConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> WebMvcConfigurer <span class="hljs-title function_">corsConfigurer</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMvcConfigurer</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCorsMappings</span><span class="hljs-params">(CorsRegistry registry)</span> &#123;<br>                registry.addMapping(<span class="hljs-string">&quot;/**&quot;</span>)<br>                        .allowedHeaders(<span class="hljs-string">&quot;*&quot;</span>)<br>                        .allowedMethods(<span class="hljs-string">&quot;*&quot;</span>)<br>                        .allowedOrigins(<span class="hljs-string">&quot;*&quot;</span>);<br>            &#125;<br>        &#125;;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>



<p>mybatis-plus的配置文件(分页插件)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@MapperScan(&quot;com.yh.mapper&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfig</span> &#123;<br>    <span class="hljs-comment">// 最新版</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();<br>        interceptor.addInnerInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));<br>        <span class="hljs-keyword">return</span> interceptor;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>同一的返回数据格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Accessors(chain = true)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;T&gt; &#123;<br><br>    <span class="hljs-keyword">private</span> String msg;<br>    <span class="hljs-keyword">private</span> String code;<br>    <span class="hljs-keyword">private</span> T data;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Result</span><span class="hljs-params">()</span>&#123;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Result</span><span class="hljs-params">(T data)</span> &#123;<br>        <span class="hljs-built_in">this</span>.data = data;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Result <span class="hljs-title function_">success</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Result</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>();<br>        result.code=<span class="hljs-string">&quot;0&quot;</span>;<br>        result.msg=<span class="hljs-string">&quot;success&quot;</span>;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">success</span><span class="hljs-params">(T data)</span>&#123;<br>        <span class="hljs-type">Result</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(data);<br>        result.code=<span class="hljs-string">&quot;0&quot;</span>;<br>        result.msg=<span class="hljs-string">&quot;success&quot;</span>;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Result <span class="hljs-title function_">error</span><span class="hljs-params">(String msg,String code)</span>&#123;<br>        Result&lt;Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;();<br>        result.msg=msg;<br>        result.code=code;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>


                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Spring%E5%BC%80%E5%8F%91%E9%9A%8F%E7%AC%94/" class="category-chain-item">Spring开发随笔</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E5%90%8E%E7%AB%AF/">#后端</a>
      
        <a href="/tags/Java/">#Java</a>
      
        <a href="/tags/Spring/">#Spring</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Spring随笔-不完整</div>
      <div>http://example.com/2022/01/10/Spring随笔-不完整/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年1月10日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/01/10/SpringBoot-maven%E5%90%88%E9%9B%86/" title="SpringBoot-maven合集">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">SpringBoot-maven合集</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/01/09/Hexo%E5%92%8CMD%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98/" title="Hexo和MD冲突问题">
                        <span class="hidden-mobile">Hexo和MD冲突问题</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.0/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"mPhovhHHyKg2LpAcQhS6tjAw-gzGzoHsz","appKey":"6W2dsSWjVfMOOkXrNbFWOSDN","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"https://mphovhhh.lc-cn-n1-shared.com","emojiCDN":null,"emojiMaps":null,"enableQQ":true},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
